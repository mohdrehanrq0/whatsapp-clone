{"version":3,"sources":["firebase.js","SidebarChats.js","Sidebar.js","Chat.js","Login.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","SidebarChats","AddNewChat","name","id","useState","seed","setSeed","message","setMessage","useEffect","Math","floor","random","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","className","onClick","roomName","prompt","add","to","Avatar","src","Sidebar","rooms","setRooms","user","setUser","onAuthStateChanged","User","snap","photoURL","IconButton","type","placeholder","room","Chat","input","setInput","setroomName","roomId","useParams","Date","length","timestamp","toDate","toLocaleTimeString","displayName","console","log","action","value","onChange","e","target","preventDefault","FieldValue","serverTimestamp","Login","alt","Button","signInWithPopup","then","result","catch","error","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f49a655f.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyDdEEgCg2HCeI9yqHVJq7tc3ZrleUirsdg\",\r\n    authDomain: \"whatsapp-clone-786.firebaseapp.com\",\r\n    projectId: \"whatsapp-clone-786\",\r\n    storageBucket: \"whatsapp-clone-786.appspot.com\",\r\n    messagingSenderId: \"973313754192\",\r\n    appId: \"1:973313754192:web:32b37b234c494c0281bd55\",\r\n    measurementId: \"G-B9PL4JTCRZ\"\r\n  };\r\n  const firebaseApp = firebase.initializeApp(firebaseConfig);\r\n  const db = firebaseApp.firestore();\r\n  const auth = firebase.auth();\r\n  const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n  export {auth, provider}\r\n  export default db","import React, {useState,useEffect} from 'react'\r\nimport './Sidebar.css'\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport db from './firebase';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction SidebarChats({AddNewChat, name , id}) {\r\n    const [seed,setSeed] = useState(\"\");\r\n    const [message, setMessage] = useState([])\r\n    const createChat  = () => {\r\n        let roomName = prompt(\"Please enter the Room Name\");\r\n        if(roomName){\r\n            // some clever stuff goes here\r\n            db.collection(\"rooms\").add({\r\n                name: roomName\r\n            })\r\n        } \r\n    }\r\n    \r\n\r\n\r\n    useEffect(() =>{\r\n        setSeed(Math.floor(Math.random()*5000));\r\n        \r\n    },[])\r\n    useEffect(() =>{\r\n        if(id){\r\n            db.collection(\"rooms\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"asc\").onSnapshot(snapshot => (\r\n                setMessage(snapshot.docs.map(doc => doc.data()))\r\n            ))\r\n            }\r\n    },[id])\r\n\r\n    return !AddNewChat ? (\r\n        <>\r\n        <Link to={`/rooms/${id}`}>\r\n            <div className=\"sidebar__chat_container\">\r\n                <Avatar className=\"avatar_img\" src={`https://avatars.dicebear.com/api/avataaars/${seed}.svg`} />\r\n                <div className=\"sidebar__chat_info\">\r\n                        <h2>{name}</h2>\r\n                        <p>{message[0]?.message}</p>\r\n                        \r\n                </div>\r\n            </div>\r\n          </Link>\r\n        </>\r\n    ) : (\r\n        <div className=\"sidebar__chat_container\" onClick={createChat}>\r\n            <h1>Add New Chat</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SidebarChats\r\n","import React, {useState, useEffect} from 'react'\r\nimport './Sidebar.css'\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport SidebarChats from './SidebarChats';\r\nimport db, {auth} from './firebase'\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\n\r\nfunction Sidebar() {\r\n    const [rooms, setRooms] = useState([]);\r\n    const [user, setUser] = useState(null);\r\n\r\n\r\n    useEffect(() => {\r\n          auth.onAuthStateChanged(User => {\r\n            setUser(User);\r\n          })\r\n    },[])\r\n\r\n  \r\n\r\n    useEffect(() => {\r\n        db.collection('rooms').onSnapshot(snap => (\r\n            setRooms(snap.docs.map(doc => (\r\n                {\r\n                    id: doc.id,\r\n                    data: doc.data()\r\n                }\r\n            )))\r\n        ))\r\n    },[])\r\n\r\n    return user ? (\r\n        <>\r\n            <div className=\"sidebar\">\r\n                <div className=\"sidebar__header\">\r\n                    <Avatar src={user.photoURL} />\r\n                    <div className=\"sidebar_header__right\">\r\n                        <IconButton>\r\n                            <DonutLargeIcon />\r\n                        </IconButton>\r\n                        <IconButton>\r\n                            <ChatIcon />    \r\n                        </IconButton>\r\n                        <IconButton>\r\n                            <MoreVertIcon />\r\n                        </IconButton>\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div className=\"sidebar__search\">\r\n                    <div className=\"sidebar__search_container\">\r\n                        <SearchOutlinedIcon />\r\n                        <input type=\"text\" placeholder=\"Search and start new chat\" className=\"search__input\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"sidebar__chats\">\r\n                    <SidebarChats AddNewChat />\r\n                    {/* <SidebarChats />\r\n                    <SidebarChats />\r\n                    <SidebarChats /> */}\r\n                    {\r\n                        rooms.map(room => (\r\n                            <SidebarChats key={room.id} id={room.id} name={room.data.name} /> \r\n                        ))\r\n                    }\r\n\r\n                \r\n                </div>\r\n            </div>\r\n        </>\r\n    ) : (<h1>hello</h1>)\r\n}\r\n\r\nexport default Sidebar\r\n","import React, {useState,useEffect} from 'react'\r\nimport './Chat.css';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport firebase from 'firebase'\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport {useParams } from 'react-router-dom';\r\nimport db from './firebase.js';\r\nimport {auth} from \"./firebase\"\r\n\r\nfunction Chat() {\r\n    const [seed,setSeed] = useState(\"\");\r\n    const [input,setInput] = useState(\"\");\r\n    const [roomName, setroomName] = useState(\"\");\r\n    const {roomId} = useParams();\r\n    const [message,setMessage] = useState([]);\r\n    const [user, setUser] = useState(null);\r\n\r\n\r\n    useEffect(() => {\r\n          auth.onAuthStateChanged(User => {\r\n            setUser(User);\r\n          })\r\n    },[])\r\n\r\n    \r\n    let sendMsg = (e) => {\r\n        e.preventDefault();\r\n        console.log(\"you type =>>> \" + input);\r\n        db.collection(\"rooms\").doc(roomId).collection(\"messages\").add({\r\n            message: input,\r\n            name: user.displayName,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp()\r\n        })\r\n        setInput(\"\");\r\n    }\r\n    useEffect(() => {\r\n        if(roomId){\r\n            db.collection(\"rooms\").doc(roomId).onSnapshot((snapshot) => \r\n                setroomName(snapshot.data().name)\r\n            );\r\n            db.collection(\"rooms\").doc(roomId).collection(\"messages\").orderBy(\"timestamp\",\"asc\").onSnapshot(snapshot => (\r\n                setMessage(snapshot.docs.map(doc => doc.data()))\r\n            ))\r\n        }\r\n    },[roomId])\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n    useEffect(() =>{\r\n        setSeed(Math.floor(Math.random()*5000));\r\n    },[])\r\n    return (\r\n        <>\r\n            <div className=\"chat\">\r\n                <div className=\"chat__header\">\r\n                    <Avatar className=\"avatar_img\" src={`https://avatars.dicebear.com/api/avataaars/${seed}.svg`} />\r\n                    <div className=\"chat__headerInfo\">\r\n                        <h2>{roomName}</h2>\r\n                        <p>Last seen at {new Date(message[message.length - 1]?.timestamp?.toDate()).toLocaleTimeString()}  </p>\r\n                    </div>  \r\n                    <div className=\"chat__headerRight\">\r\n                        <IconButton>\r\n                            <SearchIcon />\r\n                        </IconButton>\r\n                        <IconButton>\r\n                            <AttachFileIcon />\r\n                        </IconButton>\r\n                        <IconButton>\r\n                            <MoreVertIcon />\r\n                        </IconButton>\r\n                    </div> \r\n                </div>\r\n                <div className=\"chat__body\">\r\n                {message.map(message => (\r\n                    <p className={`chat__message ${message.name === user.displayName && 'chat__receiver'}`} key={message.id}>\r\n                        {message.message}\r\n                        <span className=\"chat__name\">{message.name}</span>\r\n                        <span className=\"time__span\">\r\n                            {new Date(message.timestamp?.toDate()).toLocaleTimeString()}\r\n                            {\r\n                                console.log(message.timestamp)\r\n                            }\r\n                        </span>\r\n                    </p>\r\n                ))}\r\n                    \r\n                </div>\r\n                <div className=\"chat__footer\">\r\n                    <EmojiEmotionsIcon />\r\n                        <form action=\"\">\r\n                            <input value={input} type=\"text\" onChange={e => setInput(e.target.value)} placeholder=\"Type a Message.....\" />\r\n                            <button type=\"submit\" onClick={sendMsg}>Send</button>\r\n                        </form>\r\n                    <MicIcon />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React, {  } from 'react'\r\nimport {Button} from '@material-ui/core'\r\nimport {auth, provider} from './firebase'\r\n\r\nfunction Login() {\r\n    const signIn = () => {\r\n        auth.signInWithPopup(provider).then(result => console.log(result)).catch((error) => console.log(error.message));\r\n    }\r\n    \r\n    return (\r\n        <>\r\n        <div className=\"login\">\r\n            <div className=\"login__container\">\r\n              <img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/WhatsApp.svg/479px-WhatsApp.svg.png\" alt=\"\" />\r\n              <div className=\"login__text\">\r\n                  <h1>Sign in to WhatsApp</h1>\r\n              </div>\r\n              <Button onClick={signIn}>\r\n                  Sign in with Google\r\n              </Button>\r\n                \r\n            </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","import './App.css';\nimport React, {useState, useEffect} from 'react'\nimport Sidebar from './Sidebar';\nimport Chat from './Chat';\nimport Login from './Login';\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport {auth} from \"./firebase\"\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n\n  useEffect(() => {\n        auth.onAuthStateChanged(User => {\n          setUser(User);\n        })\n  },[])\n  \n  return (\n    <div className=\"App\">\n      {/* <h1>Lets Build the Whatsapp Clone</h1> */}\n      {!user? (\n        <Login />\n      ) : (\n        <div className=\"app__body\">\n          <BrowserRouter>\n            {/* sidebar */}\n            <Sidebar />\n            <Switch>\n              <Route path=\"/rooms/:roomId\"> \n                  {/* chat */}\n                  <Chat />\n              </Route>\n              <Route path=\"/\">\n                <Chat />\n              </Route>\n                \n            </Switch>\n          </BrowserRouter>\n          </div>\n      )}\n      \n    </div>\n\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}